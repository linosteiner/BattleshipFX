language: java
jdk: oraclejdk8

before_script:
  - if [ -n "$GH_TOKEN" ]; then composer config github-oauth.github.com ${GH_TOKEN}; fi;

before_deploy:
  - git config --global user.email "builds@travis-ci.com"
  - git config --global user.name "Travis CI"
  - export GIT_TAG=$TRAVIS_BRANCH-v0.1.$TRAVIS_BUILD_NUMBER
  - git tag $GIT_TAG -a -m "Generated tag from TravisCI for build $TRAVIS_BUILD_NUMBER"
  - git push -q https://05:b1:15:38:da:0d:e3:59:fe:bd:bb:c6:f2:a0:28:39@github.com/linosteiner/BattleshipFX --tags


deploy:
  when: manual
  provider: releases
  api_key: $GH_TOKEN
  file: target/battleship.jar
  skip_cleanup: true
  on:
    tags: true

cache:
  directories:
    - $HOME/.m2g